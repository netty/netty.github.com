<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Netty.news: Netty/Incubator/Codec/Quic 0.0.1.Final released</title>
<title>Netty: Netty/Incubator/Codec/Quic 0.0.1.Final released</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<link href="../../../../images/favicon.ico" rel="shortcut icon">
<link href="//feeds.feedburner.com/netty_project" rel="alternate" title="News Feed" type="application/rss+xml">
<style>
  body {
    padding-top: 60px;
  }
</style>
<link href="//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" media="screen" rel="stylesheet" type="text/css">
<script src="../../../../lib/sh/scripts/shCore.js" type="text/javascript"></script>
<script src="../../../../lib/sh/scripts/shBrushXml.js" type="text/javascript"></script>
<link href="../../../../lib/sh/styles/shCore.css" rel="stylesheet" type="text/css">
<link href="../../../../lib/sh/styles/shThemeDefault.css" rel="stylesheet" type="text/css">
<link href="../../../../lib/common.css" rel="stylesheet" type="text/css">
<script src="../../../../lib/common.js" type="text/javascript"></script>
<!--[if lt IE 9]>
<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.js" type="text/javascript"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.3.0/respond.js" type="text/javascript"></script>
<![endif]-->
</head>
<body>
<a class="sr-only" href="#content" id="top">Skip navigation</a>
<nav class="navbar navbar-default navbar-fixed-top hidden-print" id="header" role="navigation">
<div class="container">
<div class="navbar-header">
<button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="../../../../index.html">
<span class="navbar-brand-logo"></span>
Netty project
</a>
</div>
<div class="navbar-collapse collapse">
<ul class="nav navbar-nav">
<li class="dropdown">
<a href="../../../../news/2021/12/13/4-1-72-Final.html">
News
</a>
<ul class="dropdown-menu">
<li>
<a href="../../../../news/index.html">
<i class="fa fa-archive"></i>
Archive
</a>
</li>
</ul>
</li>
<li class="dropdown">
<a href="../../../../downloads.html">
Downloads
</a>
<ul class="dropdown-menu">
<li>
<a href="https://github.com/netty/netty/archive/refs/tags/netty-4.1.72.Final.tar.gz">
<i class="fa fa-cloud-download"></i>
4.1.72.Final
<small>&dash; 13-Dec-2021</small>
</a>
</li>
<li>
<a href="https://github.com/netty/netty/archive/refs/tags/netty-4.0.56.Final.tar.gz">
<i class="fa fa-cloud-download"></i>
4.0.56.Final
<small>&dash; 05-Feb-2018</small>
</a>
</li>
<li>
<a href="https://github.com/netty/netty/archive/refs/tags/netty-3.10.6.Final.tar.gz">
<i class="fa fa-cloud-download"></i>
3.10.6.Final
<small>&dash; 29-Jun-2016</small>
</a>
</li>
<li>
<a href="https://www.tldrlegal.com/l/APACHE2">
<i class="fa fa-gavel"></i>
Apache License 2.0
</a>
</li>
<li>
<a href="https://github.com/netty/netty/releases">
<i class="fa fa-archive"></i>
Previous Releases
</a>
</li>
<li>
<a href="https://oss.sonatype.org/content/repositories/snapshots/io/netty/">
<i class="fa fa-flask"></i>
Nightly Builds
</a>
</li>
</ul>
</li>
<li class="dropdown">
<a href="../../../../wiki/index.html">
Documentation
</a>
<ul class="dropdown-menu">
<li>
<a href="../../../../wiki/user-guide.html">
<i class="fa fa-book"></i>
User guide
</a>
</li>
<li>
<a href="../../../../4.1/api/index.html">
<i class="fa fa-file-text"></i>
Javadoc - 4.1
</a>
</li>
<li>
<a href="../../../../4.0/api/index.html">
<i class="fa fa-file-text"></i>
Javadoc - 4.0
</a>
</li>
<li>
<a href="../../../../3.10/api/index.html">
<i class="fa fa-file-text"></i>
Javadoc - 3.10
</a>
</li>
<li>
<a href="../../../../wiki/all-documents.html">
<i class="fa fa-list"></i>
All Documents
</a>
</li>
<li>
<a href="../../../../wiki/related-articles.html">
<i class="fa fa-bookmark"></i>
Related Articles
</a>
</li>
<li class="hidden-xs" id="bookpromo-dropdown">
<a href="https://www.manning.com/maurer/">
<img src="../../../../images/netty-in-action.gif">
<br>
<small>
Use code <strong>mlnettyco</strong>
<br>
for a 37% discount!
</small>
</a>
</li>
</ul>
</li>
<li class="dropdown">
<a href="../../../../community.html">
Get Involved
</a>
<ul class="dropdown-menu">
<li>
<a href="https://github.com/netty/netty">
<i class="fa fa-github-square"></i>
Github
</a>
</li>
<li>
<a href="https://stackoverflow.com/questions/tagged/netty">
<i class="fa fa-stack-overflow"></i>
StackOverflow
</a>
</li>
<li>
<a href="https://twitter.com/netty_project">
<i class="fa fa-twitter-square"></i>
@netty_project
</a>
</li>
<li>
<a href="../../../../wiki/developer-guide.html">
<i class="fa fa-cogs"></i>
Developer Guide
</a>
</li>
<li>
<a href="https://webchat.freenode.net/?channels=%23netty&amp;uio=MT1mYWxzZSY5PXRydWU13">
<i class="fa fa-comment"></i>
IRC Chat
</a>
</li>
<li>
<a href="../../../../sponsor/thanks.html">
<i class="fa fa-usd"></i>
Sponsors
</a>
</li>
<li>
<a href="../../../../wiki/adopters.html">
<i class="fa fa-users"></i>
Adopters
</a>
</li>
<li>
<a href="../../../../wiki/related-projects.html">
<i class="fa fa-chain"></i>
Related Projects
</a>
</li>
</ul>
</li>
<li class="visible-xs" id="bookpromo-nav">
<a href="https://www.manning.com/maurer/">
<img src="../../../../images/netty-in-action.gif">
<br>
<small>
Use code <strong>mlnettyco</strong>
<br>
for a 37% discount!
</small>
</a>
</li>
<li>
<a href="https://feeds.feedburner.com/netty_project">
<i class="fa fa-rss"></i>
</a>
</li>
</ul>
<form action="../../../../search.html" class="navbar-form navbar-right hidden-sm" method="GET" onsubmit="return validateGlobalSearchQuery()" role="search">
<div class="form-group">
<input class="search-query form-control" id="global-search-query" name="q" placeholder="Search" type="text">
</div>
</form>
</div>
</div>
</nav>
<div id="content">
<div class="container">
<div class="row">
<div class="col-md-9">
<div class="news-item" id="main-content">
<h1>
Netty/Incubator/Codec/Quic 0.0.1.Final released
</h1>
<p class="byline">
<small>
by
<a href="https://github.com/normanmaurer">normanmaurer</a>
<br>
on
<time datetime="2020-12-09">09-Dec-2020</time>
</small>
</p>
<div class="news-content">
<p>After a bit more than 1 month of developement we are finally ready to release our first incubator version of Netty/Incubator/Codec/Quic.</p>

<p>This codec provides a QUIC implementation of <a href="https://tools.ietf.org/html/draft-ietf-quic-transport-32">draft 32</a> by wrapping <a href="https://github.com/cloudflare/quiche">quiche</a> and expose QUIC via the <code>Channel</code> API.</p>

<h1>Incubator, what does this mean ?</h1>

<p>To be able to work on new exciting features without "affecting" the core of netty we decided to start development of such features in the "incubator". This means these features will be developed in a seperate repository and only be merged back into the core netty repository once we feel that we can guarantee we not need to break the API anymore and consider these production ready. This hopefully helps to clarify expections and stability of the code and so people should be fully aware that APIs may change. Beside this it also allows to use different release schedules.</p>

<h1>How can I use the quic codec ?</h1>

<p>You we will need to include the right dependency for your platform. At the moment we only support either macOS x86_64 or linux x86_64. That said, this may change in the future.</p>

<p>An example for maven / linux would be:</p>

<pre><code>&lt;dependency&gt;&#x000A;    &lt;groupId&gt;io.netty.incubator&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;netty-incubator-codec-quic&lt;/artifactId&gt;&#x000A;    &lt;version&gt;0.0.1.Final&lt;/version&gt;&#x000A;    &lt;classifier&gt;linux-x86_64&lt;/classifier&gt;&#x000A;&lt;/dependency&gt;&#x000A;</code></pre>

<p>Or if you use macOS:</p>

<pre><code>&lt;dependency&gt;&#x000A;    &lt;groupId&gt;io.netty.incubator&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;netty-incubator-codec-quic&lt;/artifactId&gt;&#x000A;    &lt;version&gt;0.0.1.Final&lt;/version&gt;&#x000A;    &lt;classifier&gt;osx-x86_64&lt;/classifier&gt;&#x000A;&lt;/dependency&gt;&#x000A;</code></pre>

<h1>How would I setup a QUIC server / client ?</h1>

<p>Bootstrapping a QUIC server that speaks HTTP/0.9 would look like that:</p>

<pre><code class="java">// We just want to support HTTP 0.9 as application protocol&#x000A;byte[] proto = new byte[] {&#x000A;        0x08, 'h', 't', 't', 'p', '/', '0', '.', '9'&#x000A;};&#x000A;&#x000A;NioEventLoopGroup group = new NioEventLoopGroup(1);&#x000A;ChannelHandler codec = new QuicServerCodecBuilder()&#x000A;        .certificateChain("./src/test/resources/cert.crt")&#x000A;        .privateKey("./src/test/resources/cert.key")&#x000A;        .applicationProtocols(proto)&#x000A;        .maxIdleTimeout(5000, TimeUnit.MILLISECONDS)&#x000A;        // Configure some limits for the maximal number of streams (and the data) that we want to handle.&#x000A;        .initialMaxData(10000000)&#x000A;        .initialMaxStreamDataBidirectionalLocal(1000000)&#x000A;        .initialMaxStreamDataBidirectionalRemote(1000000)&#x000A;        .initialMaxStreamsBidirectional(100)&#x000A;        .initialMaxStreamsUnidirectional(100)&#x000A;&#x000A;        // Setup a token handler. In a production system you would want to implement and provide your&#x000A;        // custom one.&#x000A;        .tokenHandler(InsecureQuicTokenHandler.INSTANCE)&#x000A;        // ChannelHandler that is added into QuicChannel pipeline.&#x000A;        .handler(new ChannelInboundHandlerAdapter() {&#x000A;            @Override&#x000A;            public void channelActive(ChannelHandlerContext ctx) {&#x000A;                QuicChannel channel = (QuicChannel) ctx.channel();&#x000A;                // Create streams etc..&#x000A;            }&#x000A;&#x000A;            public void channelInactive(ChannelHandlerContext ctx) {&#x000A;                ((QuicChannel) ctx.channel()).collectStats().addListener(f -&gt; {&#x000A;                    if (f.isSuccess()) {&#x000A;                        LOGGER.info("Connection closed: {}", f.getNow());&#x000A;                    }&#x000A;                });&#x000A;            }&#x000A;&#x000A;            @Override&#x000A;            public boolean isSharable() {&#x000A;                return true;&#x000A;            }&#x000A;        })&#x000A;        .streamHandler(new ChannelInitializer&lt;QuicStreamChannel&gt;() {&#x000A;            @Override&#x000A;            protected void initChannel(QuicStreamChannel ch)  {&#x000A;                // Add a LineBasedFrameDecoder here as we just want to do some simple HTTP 0.9 handling.&#x000A;                ch.pipeline().addLast(new LineBasedFrameDecoder(1024))&#x000A;                        .addLast(new ChannelInboundHandlerAdapter() {&#x000A;                    @Override&#x000A;                    public void channelRead(ChannelHandlerContext ctx, Object msg) {&#x000A;                        ByteBuf byteBuf = (ByteBuf) msg;&#x000A;                        try {&#x000A;                            if (byteBuf.toString(CharsetUtil.US_ASCII).trim().equals("GET /")) {&#x000A;                                ByteBuf buffer = ctx.alloc().directBuffer();&#x000A;                                buffer.writeCharSequence("Hello World!\r\n", CharsetUtil.US_ASCII);&#x000A;                                // Write the buffer and shutdown the output by writing a FIN.&#x000A;                                ctx.writeAndFlush(buffer).addListener(QuicStreamChannel.SHUTDOWN_OUTPUT);&#x000A;                            }&#x000A;                        } finally {&#x000A;                            byteBuf.release();&#x000A;                        }&#x000A;                    }&#x000A;                });&#x000A;            }&#x000A;        }).build();&#x000A;try {&#x000A;    Bootstrap bs = new Bootstrap();&#x000A;    Channel channel = bs.group(group)&#x000A;            .channel(NioDatagramChannel.class)&#x000A;            .handler(codec)&#x000A;            .bind(new InetSocketAddress(9999)).sync().channel();&#x000A;    channel.closeFuture().sync();&#x000A;} finally {&#x000A;    group.shutdownGracefully();&#x000A;}&#x000A;</code></pre>

<p>And the corespanding QUIC client like that:</p>

<pre><code class="java">// We just want to support HTTP 0.9 as application protocol&#x000A;byte[] proto = new byte[] {&#x000A;        0x08, 'h', 't', 't', 'p', '/', '0', '.', '9'&#x000A;};&#x000A;&#x000A;NioEventLoopGroup group = new NioEventLoopGroup(1);&#x000A;try {&#x000A;    ChannelHandler codec = new QuicClientCodecBuilder()&#x000A;            .applicationProtocols(proto)&#x000A;            .maxIdleTimeout(5000, TimeUnit.MILLISECONDS)&#x000A;            .initialMaxData(10000000)&#x000A;            // As we don't want to support remote initiated streams just setup the limit for&#x000A;            // local initiated streams in this example.&#x000A;            .initialMaxStreamDataBidirectionalLocal(1000000)&#x000A;            .build();&#x000A;&#x000A;    Bootstrap bs = new Bootstrap();&#x000A;    Channel channel = bs.group(group)&#x000A;            .channel(NioDatagramChannel.class)&#x000A;            .handler(codec)&#x000A;            .bind(0).sync().channel();&#x000A;&#x000A;    QuicChannel quicChannel = QuicChannel.newBootstrap(channel)&#x000A;            .streamHandler(new ChannelInboundHandlerAdapter() {&#x000A;                @Override&#x000A;                public void channelActive(ChannelHandlerContext ctx) {&#x000A;                    // As we did not allow any remote initiated streams we will never see&#x000A;                    // this method called. That said just let us keep it here to demonstrate&#x000A;                    // that this handle would be called for each remote initiated stream.&#x000A;                    ctx.close();&#x000A;                }&#x000A;            })&#x000A;            .remoteAddress(new InetSocketAddress(NetUtil.LOCALHOST4, 9999))&#x000A;            .connect()&#x000A;            .get();&#x000A;&#x000A;    QuicStreamChannel streamChannel = quicChannel.createStream(QuicStreamType.BIDIRECTIONAL,&#x000A;            new ChannelInboundHandlerAdapter() {&#x000A;                @Override&#x000A;                public void channelRead(ChannelHandlerContext ctx, Object msg) {&#x000A;                    ByteBuf byteBuf = (ByteBuf) msg;&#x000A;                    System.err.println(byteBuf.toString(CharsetUtil.US_ASCII));&#x000A;                    byteBuf.release();&#x000A;                }&#x000A;&#x000A;                @Override&#x000A;                public void userEventTriggered(ChannelHandlerContext ctx, Object evt) {&#x000A;                    if (evt == ChannelInputShutdownReadComplete.INSTANCE) {&#x000A;                        // Close the connection once the remote peer did send the FIN&#x000A;                        // for this stream.&#x000A;                        ((QuicChannel) ctx.channel().parent()).close(true, 0,&#x000A;                                ctx.alloc().directBuffer(16)&#x000A;                                        .writeBytes(new byte[]{'k', 't', 'h', 'x', 'b', 'y', 'e'}));&#x000A;                    }&#x000A;                }&#x000A;            }).sync().getNow();&#x000A;    // Write the data and send the FIN. After this its not possible anymore to write any more data.&#x000A;    streamChannel.writeAndFlush(Unpooled.copiedBuffer("GET /\r\n", CharsetUtil.US_ASCII))&#x000A;            .addListener(QuicStreamChannel.SHUTDOWN_OUTPUT);&#x000A;&#x000A;    // Wait for the stream channel and quic channel to be closed (this will happen after we&#x000A;    // received the FIN).  After this is done we will close the underlying datagram channel.&#x000A;    streamChannel.closeFuture().sync();&#x000A;    quicChannel.closeFuture().sync();&#x000A;    channel.close().sync();&#x000A;} finally {&#x000A;    group.shutdownGracefully();&#x000A;}&#x000A;</code></pre>

<h1>Where can I find the project ?</h1>

<p>The project itself lives on <a href="https://github.com/netty/netty-incubator-codec-quic">GitHub</a>.</p>

<h1>What's next ?</h1>

<p>While we are activly working on this project itself we also already started with an <a href="https://github.com/netty/netty-incubator-codec-http3">HTTP3 implementation</a> on top of it.</p>

</div>
<ul class="pager">
<li class="previous">
<a href="../../../../news/2020/12/08/4-1-55-Final.html">&larr; Older</a>
</li>
<li>
<a href="../../../index.html">List all news items</a>
</li>
<li class="next">
<a href="../../../../news/2020/12/17/4-1-56-Final.html">Newer &rarr;</a>
</li>
</ul>
</div>
<div class="comments">

            <div id="disqus_thread"></div>
            <script type="text/javascript">
            var disqus_shortname = 'netty0';
            var disqus_url = "http://netty.io/news/2020/12/09/quic-0-0-1-Final.html";
            var disqus_developer = null;
            var disqus_identifier = "news/2020-12-09-quic-0-0-1-Final";
            (function() {
              var dsq = document.createElement("script"); dsq.type = "text/javascript"; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(dsq);
            })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=netty0">comments powered by Disqus.</a></noscript>
          
</div>
</div>
<div class="col-md-3">
<div id="twitter-timeline" class="hidden-xs hidden-sm hidden-print" role="complementary"><a class="twitter-timeline" href="https://twitter.com/netty_project" data-widget-id="412058459593383936">Tweets by @netty_project</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?"http":"https";if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></div>
</div>
</div>

</div>

</div>
<div class="container">
<hr>
<div id="footer">
<p>
Copyright &copy; 2021
<a href="../../../../index.html">The Netty project</a>
</p>
</div>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js" type="text/javascript"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js" type="text/javascript"></script>
<script src="../../../../lib/common.footer.js" type="text/javascript"></script>

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-95307-5', 'auto');
ga('require', 'displayfeatures');
ga('require', 'linkid', 'linkid.js');
ga('send', 'pageview');
</script>
</body>
</html>
