<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Netty.news: Netty 4.0.18.Final released</title>
<title>Netty: Netty 4.0.18.Final released</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<link href="../../../../images/favicon.ico" rel="shortcut icon">
<link href="//feeds.feedburner.com/netty_project" rel="alternate" title="News Feed" type="application/rss+xml">
<style>
  body {
    padding-top: 60px;
  }
</style>
<link href="//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css">
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" media="screen" rel="stylesheet" type="text/css">
<script src="../../../../lib/sh/scripts/shCore.js" type="text/javascript"></script>
<script src="../../../../lib/sh/scripts/shBrushXml.js" type="text/javascript"></script>
<link href="../../../../lib/sh/styles/shCore.css" rel="stylesheet" type="text/css">
<link href="../../../../lib/sh/styles/shThemeDefault.css" rel="stylesheet" type="text/css">
<link href="../../../../lib/common.css" rel="stylesheet" type="text/css">
<script src="../../../../lib/common.js" type="text/javascript"></script>
<!--[if lt IE 9]>
<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.js" type="text/javascript"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.3.0/respond.js" type="text/javascript"></script>
<![endif]-->
</head>
<body>
<a class="sr-only" href="#content" id="top">Skip navigation</a>
<nav class="navbar navbar-default navbar-fixed-top hidden-print" id="header" role="navigation">
<div class="container">
<div class="navbar-header">
<button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse" type="button">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="../../../../index.html">
<span class="navbar-brand-logo"></span>
Netty project
</a>
</div>
<div class="navbar-collapse collapse">
<ul class="nav navbar-nav">
<li class="dropdown">
<a href="../../../../news/2021/05/19/4-1-65-Final.html">
News
</a>
<ul class="dropdown-menu">
<li>
<a href="../../../../news/index.html">
<i class="fa fa-archive"></i>
Archive
</a>
</li>
</ul>
</li>
<li class="dropdown">
<a href="../../../../downloads.html">
Downloads
</a>
<ul class="dropdown-menu">
<li>
<a href="https://github.com/netty/netty/archive/refs/tags/netty-4.1.65.Final.tar.gz">
<i class="fa fa-cloud-download"></i>
4.1.65.Final
<small>&dash; 19-May-2021</small>
</a>
</li>
<li>
<a href="https://github.com/netty/netty/archive/refs/tags/netty-4.0.56.Final.tar.gz">
<i class="fa fa-cloud-download"></i>
4.0.56.Final
<small>&dash; 05-Feb-2018</small>
</a>
</li>
<li>
<a href="https://github.com/netty/netty/archive/refs/tags/netty-3.10.6.Final.tar.gz">
<i class="fa fa-cloud-download"></i>
3.10.6.Final
<small>&dash; 29-Jun-2016</small>
</a>
</li>
<li>
<a href="https://www.tldrlegal.com/l/APACHE2">
<i class="fa fa-gavel"></i>
Apache License 2.0
</a>
</li>
<li>
<a href="https://github.com/netty/netty/releases">
<i class="fa fa-archive"></i>
Previous Releases
</a>
</li>
<li>
<a href="https://oss.sonatype.org/content/repositories/snapshots/io/netty/">
<i class="fa fa-flask"></i>
Nightly Builds
</a>
</li>
</ul>
</li>
<li class="dropdown">
<a href="../../../../wiki/index.html">
Documentation
</a>
<ul class="dropdown-menu">
<li>
<a href="../../../../wiki/user-guide.html">
<i class="fa fa-book"></i>
User guide
</a>
</li>
<li>
<a href="../../../../4.1/api/index.html">
<i class="fa fa-file-text"></i>
Javadoc - 4.1
</a>
</li>
<li>
<a href="../../../../4.0/api/index.html">
<i class="fa fa-file-text"></i>
Javadoc - 4.0
</a>
</li>
<li>
<a href="../../../../3.10/api/index.html">
<i class="fa fa-file-text"></i>
Javadoc - 3.10
</a>
</li>
<li>
<a href="../../../../wiki/all-documents.html">
<i class="fa fa-list"></i>
All Documents
</a>
</li>
<li>
<a href="../../../../wiki/related-articles.html">
<i class="fa fa-bookmark"></i>
Related Articles
</a>
</li>
<li class="hidden-xs" id="bookpromo-dropdown">
<a href="https://www.manning.com/maurer/">
<img src="../../../../images/netty-in-action.gif">
<br>
<small>
Use code <strong>mlnettyco</strong>
<br>
for a 37% discount!
</small>
</a>
</li>
</ul>
</li>
<li class="dropdown">
<a href="../../../../community.html">
Get Involved
</a>
<ul class="dropdown-menu">
<li>
<a href="https://github.com/netty/netty">
<i class="fa fa-github-square"></i>
Github
</a>
</li>
<li>
<a href="https://stackoverflow.com/questions/tagged/netty">
<i class="fa fa-stack-overflow"></i>
StackOverflow
</a>
</li>
<li>
<a href="https://twitter.com/netty_project">
<i class="fa fa-twitter-square"></i>
@netty_project
</a>
</li>
<li>
<a href="../../../../wiki/developer-guide.html">
<i class="fa fa-cogs"></i>
Developer Guide
</a>
</li>
<li>
<a href="https://webchat.freenode.net/?channels=%23netty&amp;uio=MT1mYWxzZSY5PXRydWU13">
<i class="fa fa-comment"></i>
IRC Chat
</a>
</li>
<li>
<a href="../../../../sponsor/thanks.html">
<i class="fa fa-usd"></i>
Sponsors
</a>
</li>
<li>
<a href="../../../../wiki/adopters.html">
<i class="fa fa-users"></i>
Adopters
</a>
</li>
<li>
<a href="../../../../wiki/related-projects.html">
<i class="fa fa-chain"></i>
Related Projects
</a>
</li>
</ul>
</li>
<li class="visible-xs" id="bookpromo-nav">
<a href="https://www.manning.com/maurer/">
<img src="../../../../images/netty-in-action.gif">
<br>
<small>
Use code <strong>mlnettyco</strong>
<br>
for a 37% discount!
</small>
</a>
</li>
<li>
<a href="https://feeds.feedburner.com/netty_project">
<i class="fa fa-rss"></i>
</a>
</li>
</ul>
<form action="../../../../search.html" class="navbar-form navbar-right hidden-sm" method="GET" onsubmit="return validateGlobalSearchQuery()" role="search">
<div class="form-group">
<input class="search-query form-control" id="global-search-query" name="q" placeholder="Search" type="text">
</div>
</form>
</div>
</div>
</nav>
<div id="content">
<div class="container">
<div class="row">
<div class="col-md-9">
<div class="news-item" id="main-content">
<h1>
Netty 4.0.18.Final released
</h1>
<p class="byline">
<small>
by
<a href="https://github.com/normanmaurer">normanmaurer</a>
<br>
on
<time datetime="2014-04-01">01-Apr-2014</time>
</small>
</p>
<div class="news-content">
<p>No this is not an April fool, just the truth... We are happy to announce the relase of Netty 4.0.18.Final. The release comes with a massive amount of improvements and fixes so you should consider to upgrade ASAP. In total we fixed / resolved 50 issues / tasks, so this release contains a lot of stuff.</p>

<p>Please read on for more details on the changes. As always this release is backwards-compatible with earlier releases of the 4.0.x series.</p>

<h2>Most important changes / fixes</h2>

<ul>
<li>Implement thread-local cache for PooledByteBufAllocator (<a href="https://github.com/netty/netty/issues/808">#808</a>) (<a href="https://github.com/netty/netty/pull/2284">#2284</a>) (<a href="https://github.com/netty/netty/issues/2264">#2264</a>)</li>
<li>Write optimized Queue implementation for NioEventLoop (<a href="https://github.com/netty/netty/issues/1259">#1259</a>) (<a href="https://github.com/netty/netty/pull/2265">#2265</a>)</li>
<li>Add ZLIB_OR_NONE wrapper support to JdkZlibDecoder (<a href="https://github.com/netty/netty/issues/2016">#2016</a>) (<a href="https://github.com/netty/netty/pull/2269">#2269</a>)</li>
<li>NPE when using epoll transport (<a href="https://github.com/netty/netty/issues/2262">#2262</a>)</li>
<li>epoll transport always calls ChannelInboundHandler.channelActive(), even when connection fails (<a href="https://github.com/netty/netty/issues/2280">#2280</a>) (<a href="https://github.com/netty/netty/issues/2292">#2292</a>)</li>
<li>Thread contention in ChannelHandlerAdapter.isSharable (<a href="https://github.com/netty/netty/issues/2289">#2289</a>) (<a href="https://github.com/netty/netty/pull/2296">#2296</a>)</li>
<li>Shutdown fails with native epoll (<a href="https://github.com/netty/netty/issues/2297">#2297</a>)</li>
<li>Blocking in SingleThreadEventExecutor#startThread (<a href="https://github.com/netty/netty/issues/2307">#2307</a>) (<a href="https://github.com/netty/netty/pull/2310">#2310</a>)</li>
<li>Blocking in SelectorProvider#provider (<a href="https://github.com/netty/netty/issues/2308">#2308</a>)</li>
<li>Netty 4.0.15 no longer works on Android (<a href="https://github.com/netty/netty/issues/2330">#2330</a>)</li>
<li>"Promise already done" warning when cancelling ChannelFuture returned by bootstrap.connect() (<a href="https://github.com/netty/netty/issues/2349">#2349</a>)</li>
</ul>


<p>Visit <a href="https://github.com/netty/netty/issues?q=milestone%3A4.0.18.Final">here</a> for the complete list of the changes.</p>

<p>As always please let us know if you find any issues. We love feedback!</p>

<h2>Special notes</h2>

<h3>ThreadLocal cache for PooledByteBufAllocator</h3>

<p>One important thing to note about this release is that it now ships with ThreadLocal based caches for PooledByteBufAllocator to reduce conditions when allocate buffers very frequently from different Threads. This brings our implementation even closer to the <a href="https://github.com/jemalloc/jemalloc">jemalloc</a> implementation itself, as jemalloc uses a similar way to handle this kind of problem.</p>

<p>To give you some idea about the impact have a look at these different condition graphs. The first shows the conditions before the caches were added and the second with them added (with the same workload).</p>

<p><img src="/images/pooledbytebufallocator_condition_before.png" alt="PooledByteBufAllocator without caches" /></p>

<p><img src="/images/pooledbytebufallocator_condition_after.png" alt="PooledByteBufAllocator with caches" /></p>

<p>This change makes a big-difference in performance if you push things hard enough. For more details please check the <a href="https://github.com/netty/netty/pull/2284">pull-request #2284</a>.</p>

<h1>Thank You</h1>

<p>Every idea and bug-report counts and so we thought it is worth mentioning those who helped in this area. Please report an unintended omission.</p>

<ul>
<li><a href="https://github.com/aaronriekenberg">@aaronriekenberg</a></li>
<li><a href="https://github.com/andrewgaul">@andrewgaul</a></li>
<li><a href="https://github.com/blucas">@blucas</a></li>
<li><a href="https://github.com/caiiiycuk">@caiiiycuk</a></li>
<li><a href="https://github.com/CoNDoRip">@CoNDoRip</a></li>
<li><a href="https://github.com/danbev">@danbev</a></li>
<li><a href="https://github.com/daschl">@daschl</a></li>
<li><a href="https://github.com/ddossot">@ddossot</a></li>
<li><a href="https://github.com/fredericBregier">@fredericBregier</a></li>
<li><a href="https://github.com/hepin1989">@hepin1989</a></li>
<li><a href="https://github.com/itzg">@itzg</a></li>
<li><a href="https://github.com/JatinderSingh">@JatinderSingh</a></li>
<li><a href="https://github.com/jakobbuchgraber">@jakobbuchgraber</a></li>
<li><a href="https://github.com/jchambers">@jchambers</a></li>
<li><a href="https://github.com/laczoka">@laczoka</a></li>
<li><a href="https://github.com/m0wfo">@m0wfo</a></li>
<li><a href="https://github.com/mkw">@mkw</a></li>
<li><a href="https://github.com/ngocdaothanh">@ngocdaothanh</a></li>
<li><a href="https://github.com/normanmaurer">@normanmaurer</a></li>
<li><a href="https://github.com/opinali">@opinali</a></li>
<li><a href="https://github.com/p000ison">@p000ison</a></li>
<li><a href="https://github.com/superzhu">@superzhu</a></li>
<li><a href="https://github.com/tea-dragon">@tea-dragon</a></li>
<li><a href="https://github.com/thatsnotright">@thatsnotright</a></li>
<li><a href="https://github.com/Tochemey">@Tochemey</a></li>
<li><a href="https://github.com/trustin">@trustin</a></li>
<li><a href="https://github.com/tsingxu">@tsingxu</a></li>
<li><a href="https://github.com/valodzka">@valodzka</a></li>
<li><a href="https://github.com/xhumanoid">@xhumanoid</a></li>
</ul>


</div>
<ul class="pager">
<li class="previous">
<a href="../../../../news/2014/02/25/4-0-17-Final.html">&larr; Older</a>
</li>
<li>
<a href="../../../index.html">List all news items</a>
</li>
<li class="next">
<a href="../../../../news/2014/04/30/release-day.html">Newer &rarr;</a>
</li>
</ul>
</div>
<div class="comments">

            <div id="disqus_thread"></div>
            <script type="text/javascript">
            var disqus_shortname = 'netty0';
            var disqus_url = "http://netty.io/news/2014/04/01/4-0-18-Final.html";
            var disqus_developer = null;
            var disqus_identifier = "news/2014-04-01-4-0-18-Final.html";
            (function() {
              var dsq = document.createElement("script"); dsq.type = "text/javascript"; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(dsq);
            })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=netty0">comments powered by Disqus.</a></noscript>
          
</div>
</div>
<div class="col-md-3">
<div id="twitter-timeline" class="hidden-xs hidden-sm hidden-print" role="complementary"><a class="twitter-timeline" href="https://twitter.com/netty_project" data-widget-id="412058459593383936">Tweets by @netty_project</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?"http":"https";if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></div>
</div>
</div>

</div>

</div>
<div class="container">
<hr>
<div id="footer">
<p>
Copyright &copy; 2021
<a href="../../../../index.html">The Netty project</a>
</p>
</div>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js" type="text/javascript"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js" type="text/javascript"></script>
<script src="../../../../lib/common.footer.js" type="text/javascript"></script>

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-95307-5', 'auto');
ga('require', 'displayfeatures');
ga('require', 'linkid', 'linkid.js');
ga('send', 'pageview');
</script>
</body>
</html>
